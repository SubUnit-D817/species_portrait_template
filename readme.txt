------------------------------------------------------------------------
--  StellarisポートレイトMOD作成用テンプレート
--  作った人：SubUnit-D817
--  更新履歴：00.00.001：2024/08/16：新規作成
--          ：00.00.002：2024/08/17：GitHubに登録。体裁を整える。
--          ：00.00.003：2024/08/20：portrait_categoriesを種族ごとに分割。テスト画像差し替え。
--          ：00.00.004：20yy/mm/dd：
--
--  タブは８文字
------------------------------------------------------------------------
・はじめに
　これは自分がStellarisのポートレイトMOD作成するにあたり、
　めんどくせぇ・・・雛型でもあれば良いのにと思い立ち、
　どうせ作るなら誰でも使えるようなものがあればいいのでは？
　需要があればだけど・・・

　というわけで、MOD作成ガイドのコメント欄に書き込んだところ、
　反応があったので、急遽説明書きを取りまとめたものとなります。


・できること
　・静止画ポートレイトMODの作成

・できないこと
　・上記以外
　　アニメーションポートレイトMODの作成
　　名称リストとの連動
　　その他、起源やイベントの追加など

・必要なもの
　・テキストエディタ
　　notepad（メモ帳）ではダメ！
　　文字コード指定の出来るテキストエディタが必要
　　編集するファイルはテキストだが、全てUTF-8 BOM無し（ローカライズのみBOM有り）なので

　・ポートレイト用の画像
　　最低でも１枚は用意すること

　・画像編集ソフト
　　DDS(DirectDraw surface)形式とPSD（Photoshopドキュメント）形式が取り扱えて、
　　背景が透過できる物（この２形式が取り扱えるなら、背景の透過はできるはず）
　　作者はPaint.netを使用した


・その他
　・作者の環境では雛型のままでポートレイトを追加してプレイできることは確認済みなので、
　　追加できないぞと言われても困る

　・画像は自分で用意

・謝辞
　MOD作成ガイドのコメント欄で反応下さった方々、おかげで公開する踏ん切りがつきました。
　特に参考情報としてご自身が管理されているGitHubを教えて下さったのFatalErrorJP様、
　大変参考になりました。また、コードの添削ありがとうございました。
　ローカライズ定義のコメントを使わせて頂いてます。

------------------------------------------------------------------------
--  フォルダ構成
------------------------------------------------------------------------
species_portrait_template
│  readme.txt								：このファイル
│  template.psd							：ポートレイト画像のテンプレ（位置確認用）
│
└─MOD
    │  mod_portrait_hinagata.mod					：PC用MOD定義
    │
    └─portrait_hinagata						：ポートレイトMOD本体
        │  descriptor.mod						：ランチャー用MOD定義
        │
        ├─common
        │  ├─portrait_categories					：種族選択画面表示用定義
        │  │      00_hinagata_portrait_categories.txt			：　有機生命体用定義
        │  │      01_hinagata_robotics_portrait_categories.txt	：　機械知性用定義
        │  │      02_hinagata_lithoid_portrait_categories.txt		：　岩石種族用定義
        │  │
        │  ├─portrait_sets						：種族ポートレイト定義
        │  │      00_hinagata_portrait_sets.txt			：　有機生命体用定義
        │  │      01_hinagata_robotics_portrait_sets.txt		：　機械知性用定義
        │  │      02_hinagata_lithoid_portrait_sets.txt		：　岩石種族用定義
        │  │
        │  └─species_classes						：種族定義
        │          00_hinagata_species_classes.txt			：　有機生命体用定義
        │          01_hinagata_robotics_species_classes.txt		：　機械知性用定義
        │          02_hinagata_lithoid_species_classes.txt		：　岩石種族用定義
        │
        ├─gfx
        │  ├─models							：ポートレイト画像格納フォルダ
        │  │  ├─hinagata						：有機生命体用ポートレイト画像
        │  │  │      char098.dds					：　テスト画像[役人/男性]	※役職でわける必要は無い
        │  │  │      char099.dds					：　テスト画像[役人/女性]
        │  │  │      char198.dds					：　テスト画像[科学者/男性]
        │  │  │      char199.dds					：　テスト画像[科学者/女性]
        │  │  │      char298.dds					：　テスト画像[司令官/男性]
        │  │  │      char299.dds					：　テスト画像[司令官/女性]
        │  │  │      char398.dds					：　テスト画像[使節/男性]
        │  │  │      char399.dds					：　テスト画像[使節/女性]
        │  │  │      char998.dds					：　テスト画像[汎用/男性]
        │  │  │      char999.dds					：　テスト画像[汎用/女性]
        │  │  │
        │  │  ├─hinagata_lithoid					：岩石種族用ポートレイト画像
        │  │  │      lithoid098.dds					：　テスト画像[役人/男性]	※役職でわける必要は無い
        │  │  │      lithoid099.dds					：　テスト画像[役人/女性]
        │  │  │      lithoid198.dds					：　テスト画像[科学者/男性]
        │  │  │      lithoid199.dds					：　テスト画像[科学者/女性]
        │  │  │      lithoid298.dds					：　テスト画像[司令官/男性]
        │  │  │      lithoid299.dds					：　テスト画像[司令官/女性]
        │  │  │      lithoid398.dds					：　テスト画像[使節/男性]
        │  │  │      lithoid399.dds					：　テスト画像[使節/女性]
        │  │  │      lithoid998.dds					：　テスト画像[汎用/男性]
        │  │  │      lithoid999.dds					：　テスト画像[汎用/女性]
        │  │  │
        │  │  └─hinagata_robotics					：機械知性用ポートレイト画像
        │  │          robo098.dds					：　テスト画像[役人/男性]	※役職でわける必要は無い
        │  │          robo099.dds					：　テスト画像[役人/女性]
        │  │          robo198.dds					：　テスト画像[科学者/男性]
        │  │          robo199.dds					：　テスト画像[科学者/女性]
        │  │          robo298.dds					：　テスト画像[司令官/男性]
        │  │          robo299.dds					：　テスト画像[司令官/女性]
        │  │          robo398.dds					：　テスト画像[使節/男性]
        │  │          robo399.dds					：　テスト画像[使節/女性]
        │  │          robo998.dds					：　テスト画像[汎用/男性]
        │  │          robo999.dds					：　テスト画像[汎用/女性]
        │  │
        │  └─portraits
        │      └─portraits						：ポートレイト定義
        │              00_hinagata_portraits.txt			：　有機生命体用定義
        │              01_hinagata_robotics_portraits.txt		：　機械知性用定義
        │              02_hinagata_lithoid_portraits.txt		：　岩石種族用定義
        │
        └─localisation						：ローカライズ定義（言語ごと）
            └─japanese						：日本語用定義（他には英/葡/仏/独/波/露/西/韓/中がある）
                    hinagata_l_japanese.yml

------------------------------------------------------------------------
--  説明
------------------------------------------------------------------------
とりあえずMODフォルダの中にある

  portrait_hinagata	※フォルダごと
  mod_portrait_hinagata.mod

の２つをMOD格納用フォルダに突っ込めば、
種族リストに「雛型」という名称でテスト用の画像を使った
ポートレイトが選択可能になります。

▼MOD格納用フォルダ（Windowsの設定を変えていなければ）
C:\Users\(ユーザー名)\Documents\Paradox Interactive\Stellaris\mod\

------------------------------------------------------------------------
--  設定方法
------------------------------------------------------------------------
一応、以下の手順で自前のポートレイト追加MODにできるけど、
めんどくさければ（種族名等を気にしないのであれば）画像の差し替えだけで機能する。


１）フォルダ名、ファイル名の変更

　※そのまま使ってもいいけど、後から別のポートレイト増やしたいなら変えておくのを推奨

　・フォルダ名、ファイル名に含まれる「hinagata」を全て変更する
　　種族名の英字が良いと思います。


２）MOD定義の編集

　・MODの名称を設定する
　　また、フォルダ名も変更しているはずなので、ここで修正する

********
	version="0.0.1"			：このMODのバージョン（お好きな値で）
	tags={
		"Species"		：ここはMODの追加時に設定したタグなので、特に変える必要は無い
	}
	name="ポートレイトMOD雛型"	：たぶんワークショップに表示されるMODの名前（わかり易い名前に）
	supported_version="v3.12.*"	：MODが対応するゲームのバージョン（多少違っても問題ない。24/8/16時点ではv3.12.5）
	path="mod/portrait_hinagata"	：MODのパス　変更後のフォルダ名に変更する
********

　・UTF-8 BOM無しで保存する


３）ランチャー用MOD定義の編集

　・MODの名称を設定する

********
	version="0.0.1"			：このMODのバージョン（お好きな値で）
	tags={
		"Species"		：ここはMODの追加時に設定したタグなので、特に変える必要は無い
	}
	name="ポートレイトMOD雛型"	：ランチャーに表示されるMODの名前（わかり易い名前に）
	supported_version="v3.12.*"	：MODが対応するゲームのバージョン（多少違っても問題ない。24/8/16時点ではv3.12.5）
********

　・UTF-8 BOM無しで保存する


４）種族定義（species_classes）の編集

　・有機生命体用、機械知性用、岩石種族用のファイルがあるので、
　　不要な種族を削除する。

　・各ファイルの３行目の種族識別子を変更する（必須）

　・その他の設定はお好みで
　※利用可能な条件、プレイ条件は必須のＤＬＣがあったりするので変えない事

　・SJISで保存する


５）種族ポートレイト定義（portrait_sets）の編集

　・有機生命体用、機械知性用、岩石種族用のファイルがあるので、
　　不要な種族を削除する。

　・各ファイルの５行目の種族カテゴリー内識別子を変更する（必須）
　※１と同じ名称を使用して「hinagata」の部分を変更する。

　・SJISで保存する


６）種族選択画面表示用定義（portrait_categories）の編集

　・４行目の種族グループ識別子を変更する（必須）
　※１と同じ名称を使用して「hinagata」の部分を変更する。

　・９行目の種族グループ名識別子を変更する（必須）
　※１と同じ名称を使用して「hinagata」の部分を変更する。

　・setsで使用したい種族以外の種族カテゴリー内識別子を削除する。
　※４や５で削除した種族の識別子を削除する。

　・SJISで保存する


７）ローカライズ定義の編集

　・６で変更した種族グループ名識別子が出てくるのでportrait_categoriesに合わせて変更する

　・種族グループ名の日本語を設定する

　・UTF-8 BOM有りで保存する


８）画像を用意する

　・Paint.Netがあると良い

　・画像サイズは360x360

　・同梱しているtemplate.psdで表示範囲を確認しながら、サイズと配置を決める
　　上左右は枠内に収めると見栄えが良い。下ははみ出すくらいに

　・背景を透過する

　・DDS(DirectDraw surface)形式で保存する

　・作成したDDS形式の画像をポートレイト画像格納フォルダに配置する


９）ポートレイト定義（portraits）の編集

　・有機生命体用、機械知性用、岩石種族用のファイルがあるので、
　　不要な種族を削除する。

　・画像のパスを変更する（必須）
　※１と同じ名称を使用して「hinagata」の部分を変更する。

　・画像ファイルの指定
　　portrait000 = {texturefile = "gfx/models/xxxxx/gazou.dds"}　を、作成した画像に合わせて
　　必要な数だけ記述する
　　「=」の左側は識別子、右側が画像ファイルのパス（gfxフォルダから始まる相対パス）
　　※「portrait000」は以降で使用する画像識別子（全体を通して重複しないこと）
　　※「xxxxx」は「hinagata」から変更した種族名の英字
　　※「gazou.dds」は実際の画像ファイル名

　・各設定で私用したいポートレイトを識別子で記述する
　　portraitsの中にあるtxtを見てもらえば、たぶんわかると思う・・・

　・SJISで保存する


１０）MODの配置と動作確認

　・MOD格納用フォルダにMOD定義とポートレイトMODフォルダを配置する

　・Stellarisを起動する

　・ランチャー左側の「インストール済みのすべてのMOD」を選択し、作成したMODが表示されているか確認する
　　表示されていない場合、MODの再ロードを試みる
　　⇒それでも表示されない場合、MODの配置場所か「２）MOD定義の編集」を間違えていると思います。
　　　見直してください。

　・プレイセットに作成したMODを追加する

　・MODを追加したプレイセットでStellarisを起動する

　・ニューゲーム→新規作成と選択し、以下を確認する

　　・外見：作成した種族が一覧に表示されているか
　　　　⇒表示されない場合、種族選択画面表示用定義が誤っていると思われる
　　　　　見直してください。
　　　　⇒表示されるが名称がおかしい場合、ローカライズ定義が誤っていると思われる
　　　　　見直してください。

　　・外見選択後、ポートレイトの一覧が表示されるか
　　　　⇒表示されない場合、種族定義、種族ポートレイト定義、ポートレイト定義が誤っていると思われる
　　　　　見直してください。

　　・統治者の外見が表示されるか、性別、遺伝的形質の変更でポートレイトも切り替わるか
　　　　⇒外見が表示されない場合、ポートレイト定義が誤っている
　　　　　見直してください。
　　　　⇒性別変更で画像が切り替わらない場合、ポートレイト定義が誤っているか、そもそも１つしか定義していない
　　　　　見直してください。
　　　　⇒遺伝的形質の変更で画像が切り替わらない場合、ポートレイト定義が誤っているか、そもそも１つしか定義していない
　　　　　見直してください。

　　・上記が問題無ければゲームを開始する

　　・各種画面でポートレイトが想定通りに表示されているか
　　　　⇒表示されていない場合、ポートレイト定義が誤っている
　　　　　見直してください。
　　　　⇒ずれて表示されている場合、template.psdで画像の配置を確認してDDS画像ファイルを作り直す


１１）おつかれさまでした！

　・ここまできたら正常にゲームがプレイできるはずです。
　　おつかれさまでした！

